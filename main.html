<script src="https://code.jquery.com/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<p id="loginUserEmail">로그인한 사람 이메일</p>
<p id="loginUserNickName">로그인한 사람 닉네임</p>

<button id="logoutBtn">로그아웃</button>

<!-- 주제 제목 / 백그라운드 이미지  -->

<script>

//  쿠키에 값이 있는 상태로 main이 열리면 원래 작업 진행
//  쿠키가 비어있는 상태로 main이 열리면 alert('잘못된 접근입니다.')
//  로그인화면으로 이동

    if ($.cookie('loginUserToken')) {
// axios로 main_info 정보 가져오기.

        const instance = axios.create({
            baseURL: 'http://15.165.177.142',
            timeout: 1000,
            headers: {'X-Http-Token': $.cookie('loginUserToken')}
        });

        instance.get('/main_info', {
            params: {
                device_token: '웹브라우저',
                os: 'etc'
            }
        })
        .then(function (response) {
            console.log(response);

            let email = response.data.data.user.email
            $('#loginUserEmail').text(email)

            let nickName = response.data.data.user.nick_name
            $('#loginUserNickName').text(nickName)
        })
        .catch(function (error) {
            console.log(error);
        })
    }
    else {
        alert('잘못된 접근입니다. 다시 로그인 해주세요.')
        $(location).attr('href', 'login_practice.html');
    }

    

</script>

<script>
    $('#logoutBtn').click(function() {
        $.removeCookie('loginUserToken')
        $(location).attr('href', 'login_practice.html');
    })
</script>